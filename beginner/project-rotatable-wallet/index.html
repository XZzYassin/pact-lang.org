



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Pact Developer Tutorials">
      
      
      
        <meta name="author" content="Kadena">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>Project: Rotatable Wallet - Pact Developer Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica:300,400,400i,700|Helvetica">
        <style>body,input{font-family:"Helvetica","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Helvetica","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#pact-rotatable-wallet" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Pact Developer Tutorials" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Pact Developer Tutorials
              </span>
              <span class="md-header-nav__topic">
                Project: Rotatable Wallet
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/kadena-io/pact/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kadena-io/pact
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../welcome-to-pact/" title="Beginner" class="md-tabs__link md-tabs__link--active">
          Beginner
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../intermediate/coming-soon/" title="Intermediate" class="md-tabs__link">
          Intermediate
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../advanced/coming-soon/" title="Advanced" class="md-tabs__link">
          Advanced
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Pact Developer Tutorials" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Pact Developer Tutorials
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/kadena-io/pact/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kadena-io/pact
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Beginner
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Beginner
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../welcome-to-pact/" title="Welcome to Pact" class="md-nav__link">
      Welcome to Pact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../online-editor/" title="Online Editor" class="md-nav__link">
      Online Editor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hello-world-with-pact/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-language-basics/" title="Language Basics" class="md-nav__link">
      Language Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-modules/" title="Modules" class="md-nav__link">
      Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-keysets/" title="Keysets" class="md-nav__link">
      Keysets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-schemas-and-tables/" title="Schemas and Tables" class="md-nav__link">
      Schemas and Tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-accounts-and-transfers/" title="Accounts and Transfers" class="md-nav__link">
      Accounts and Transfers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract-interaction/" title="Contract Interaction" class="md-nav__link">
      Contract Interaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-on-atom-sdk/" title="Atom SDK" class="md-nav__link">
      Atom SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../testing-pact-code-in-the-sdk/" title="Test in the SDK" class="md-nav__link">
      Test in the SDK
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Project: Rotatable Wallet
      </label>
    
    <a href="./" title="Project: Rotatable Wallet" class="md-nav__link md-nav__link--active">
      Project: Rotatable Wallet
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rotatable-wallet-module-demonstration" title="Rotatable Wallet Module Demonstration" class="md-nav__link">
    Rotatable Wallet Module Demonstration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-overview" title="Project Overview" class="md-nav__link">
    Project Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-environment-setup" title="Project Environment Setup" class="md-nav__link">
    Project Environment Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-define-keysets" title="1. Define Keysets" class="md-nav__link">
    1. Define Keysets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-define-module" title="2. Define Module" class="md-nav__link">
    2. Define Module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-define-schema-and-table" title="3. Define Schema and Table" class="md-nav__link">
    3. Define Schema and Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-create-functions" title="4. Create Functions" class="md-nav__link">
    4. Create Functions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-create-user" title="4.1 Create User" class="md-nav__link">
    4.1 Create User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-enforce-user" title="4.2 Enforce User" class="md-nav__link">
    4.2 Enforce User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-change-nickname" title="4.3 Change Nickname" class="md-nav__link">
    4.3 Change Nickname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-rotate-keyset" title="4.4 Rotate Keyset" class="md-nav__link">
    4.4 Rotate Keyset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-table" title="5. Create Table" class="md-nav__link">
    5. Create Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-the-smart-contract" title="Deploy the Smart Contract" class="md-nav__link">
    Deploy the Smart Contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" title="Review" class="md-nav__link">
    Review
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project-loans/" title="Project: Loans" class="md-nav__link">
      Project: Loans
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Intermediate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Intermediate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intermediate/coming-soon/" title="Coming Soon" class="md-nav__link">
      Coming Soon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/coming-soon/" title="Coming Soon" class="md-nav__link">
      Coming Soon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rotatable-wallet-module-demonstration" title="Rotatable Wallet Module Demonstration" class="md-nav__link">
    Rotatable Wallet Module Demonstration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-overview" title="Project Overview" class="md-nav__link">
    Project Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-environment-setup" title="Project Environment Setup" class="md-nav__link">
    Project Environment Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-define-keysets" title="1. Define Keysets" class="md-nav__link">
    1. Define Keysets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-define-module" title="2. Define Module" class="md-nav__link">
    2. Define Module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-define-schema-and-table" title="3. Define Schema and Table" class="md-nav__link">
    3. Define Schema and Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-create-functions" title="4. Create Functions" class="md-nav__link">
    4. Create Functions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-create-user" title="4.1 Create User" class="md-nav__link">
    4.1 Create User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-enforce-user" title="4.2 Enforce User" class="md-nav__link">
    4.2 Enforce User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-change-nickname" title="4.3 Change Nickname" class="md-nav__link">
    4.3 Change Nickname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-rotate-keyset" title="4.4 Rotate Keyset" class="md-nav__link">
    4.4 Rotate Keyset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-table" title="5. Create Table" class="md-nav__link">
    5. Create Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-the-smart-contract" title="Deploy the Smart Contract" class="md-nav__link">
    Deploy the Smart Contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" title="Review" class="md-nav__link">
    Review
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kadena-io/pact/edit/master/docs/beginner/project-rotatable-wallet.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="pact-rotatable-wallet">Pact Rotatable Wallet<a class="headerlink" href="#pact-rotatable-wallet" title="Permanent link">&para;</a></h1>
<p>Welcome to this <strong>Rotatable Wallet</strong> project tutorial! </p>
<p>Here you’ll create a smart contract named <strong>Rotatable Wallets</strong> that demonstrates many important Pact features that you learned throughout previous tutorials.</p>
<p><strong>Topics covered in this tutorial</strong></p>
<ul>
<li>Project Overview</li>
<li>Define Keysets</li>
<li>Define Module</li>
<li>Define Schema and Table</li>
<li>Functions</li>
<li>Create Table</li>
<li>Deploy the Contract</li>
</ul>
<div class="admonition summary">
<p class="admonition-title">Key Takeaway</p>
<p>Modules can be permissioned to ensure the security of running your code on a decentralized network and allow for row level permissions when necessary.</p>
</div>
<hr />
<h2 id="rotatable-wallet-module-demonstration"><strong>Rotatable Wallet Module Demonstration</strong><a class="headerlink" href="#rotatable-wallet-module-demonstration" title="Permanent link">&para;</a></h2>
<p>The module you will build is called the <strong>Auth</strong> Module and allows for a feature known as a Rotatable Wallet.</p>
<p>This builds on earlier knowledge and helps demonstrate how keysets can be used at the "row level" to guard assets. It’s an example of how a Pact smart contract can manage user keysets in a decentralized fashion allowing users to update information based on their keyset. The ability to change keyset values is referred to as <strong>rotating keysets</strong>.</p>
<p>By creating this module, you’ll be able to effectively create smart contracts that guard assets at a row level and take advantage of functions that allow users to update information in tables.</p>
<hr />
<h2 id="project-overview"><strong>Project Overview</strong><a class="headerlink" href="#project-overview" title="Permanent link">&para;</a></h2>
<p>Before getting into the code, take some time to review what you’ll be building. This smart contract can be broken down into steps focused on 4 core areas that include the keysets, module, table, and functions. </p>
<p><img alt="1-project-overview" src="../../assets/beginner-tutorials/project-rotatable-wallet/1-project-overview.png" /></p>
<p>The details of each step will be described as you progress through the tutorial. Each step will include a short description ending with a code challenge. If you get stuck, you can always look at the hints or solutions we provide.</p>
<h2 id="project-environment-setup"><strong>Project Environment Setup</strong><a class="headerlink" href="#project-environment-setup" title="Permanent link">&para;</a></h2>
<p>To get started, choose a project directory and clone the <a href="https://github.com/kadena-io/pact-lang.org-code" target="_blank">project resources</a> into your local environment. </p>
<div class="codehilite"><pre><span></span>git clone https://github.com/kadena-io/pact-lang.org-code.git
</pre></div>


<p>Change into the <strong>loans</strong> directory to begin working on this project.</p>
<div class="codehilite"><pre><span></span>cd pact-lang.org-code/rotatable-wallet
</pre></div>


<p>Open this directory in atom to see each of the files provided.</p>
<div class="codehilite"><pre><span></span>atom .
</pre></div>


<p>As you’ll see, there are a few separate folders available to you.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>start</strong></td>
<td>Provides a starting point with all comments for every challenge.</td>
</tr>
<tr>
<td><strong>challenges</strong></td>
<td>Challenges in the demo are broken out into separate files, allowing you to build your application over time while having the flexibility to experiment with your own ideas.</td>
</tr>
<tr>
<td><strong>finish</strong></td>
<td>Includes all comments and code for the final application.</td>
</tr>
<tr>
<td><strong>loans</strong></td>
<td>Includes final application without the challenge comments.</td>
</tr>
</tbody>
</table>
<p>Each of these options are meant to help support you as you work through these challenges. Feel free to use them however you’d like to.</p>
<p>When you’re set up to begin, follow along with each step to create your own Rotatable Wallet Smart Contract!</p>
<hr />
<h2 id="1-define-keysets"><strong>1. Define Keysets</strong><a class="headerlink" href="#1-define-keysets" title="Permanent link">&para;</a></h2>
<p>Get started with your smart contract by defining it’s keysets. </p>
<p>The 2 keysets required for this smart contract are a <strong>module-admin-keyset</strong> that will allow users to define and update modules, and an <strong>module-operate-keyset</strong> that will allow users to create accounts. </p>
<p>Each of these keysets play a specific role that will be defined later in the application. </p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Complete define and read the <strong>module-admin-keyset</strong> and the <strong>module-operate-keyset</strong>.</p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/1-define-keysets/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/1-define-keysets/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#define-keyset" target="_blank">define-keyset</a> for more information on defining and reading keysets.</p>
</div>
<hr />
<h2 id="2-define-module"><strong>2. Define Module</strong><a class="headerlink" href="#2-define-module" title="Permanent link">&para;</a></h2>
<p>The next step is to create the module that will contain the logic of your smart contract.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define a module named <strong>auth</strong> that specifies access to the <strong>module-admin</strong> keyset. </p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/2-define-module/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/2-define-module/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=keysets#module" target="_blank">module</a> for more information on creating modules.</p>
</div>
<hr />
<h2 id="3-define-schema-and-table"><strong>3. Define Schema and Table</strong><a class="headerlink" href="#3-define-schema-and-table" title="Permanent link">&para;</a></h2>
<p>This smart contract contains a schema named <strong>user</strong> with 2 columns; <strong>nickname</strong> held as a string and <strong>keyset</strong> which is held as a keyset. Use this schema to both define and create a table named <strong>users</strong>.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define the user schema and table.</p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/3-define-schema-and-table/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/3-define-schema-and-table/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html#defschema" target="_blank">defschema</a> and <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html#defschema" target="_blank">deftable</a> for more information on creating schemas and tables.</p>
</div>
<hr />
<h2 id="4-create-functions">4. Create Functions<a class="headerlink" href="#4-create-functions" title="Permanent link">&para;</a></h2>
<p>You're now ready to complete the functions for this module. </p>
<table>
<thead>
<tr>
<th>function</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>create-user</strong></td>
<td>Allows operate-admin to add rows to the user table.</td>
</tr>
<tr>
<td><strong>enforce-user-auth</strong></td>
<td>Restrict access permissions to users with a given id.</td>
</tr>
<tr>
<td><strong>change-nickname</strong></td>
<td>Allow users with a specific keyset to update their nickname.</td>
</tr>
<tr>
<td><strong>rotate-keyset</strong></td>
<td>Allow the owner of a keyset to change their keyset.</td>
</tr>
</tbody>
</table>
<p>The goal of these functions is to allow users the flexibility they need to create and manage their accounts.</p>
<h3 id="41-create-user"><strong>4.1 Create User</strong><a class="headerlink" href="#41-create-user" title="Permanent link">&para;</a></h3>
<p>In this step, you will create a function that allows the <strong>operate-admin</strong> to add rows to the users table.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define a function named <strong>create-user</strong> that takes 3 arguments; id, nickname, and keyset. Next, restrict access for function calls to the <strong>operate-admin</strong>. Finally, insert a row into the <strong>users</strong> table using the inputs specified by the user. </p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.1-create-user/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.1-create-user/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#enforce-keyset" target="_blank">enforce-keyset</a> and <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#insert" target="_blank">insert</a> for more information related to completing this challenge.</p>
</div>
<hr />
<h3 id="42-enforce-user"><strong>4.2 Enforce User</strong><a class="headerlink" href="#42-enforce-user" title="Permanent link">&para;</a></h3>
<p>It’s sometimes useful to restrict access to data to specific users. For example, users may not want others to see the balance of their account or other sensitive information. This can be done in Pact by enforcing access to rows of data using row-level keysets. </p>
<p>The first step toward making this happen is to be able to view the keyset associated with a specific id. The following function shows an example of reading a keyset in a specific row from a given id.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">enforce-keyset-of-id</span> <span class="p">(</span><span class="nf">id</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">with-read</span> <span class="nv">table</span> <span class="nv">id</span> <span class="p">{</span> <span class="s">&quot;keyset&quot;</span><span class="ss">:=</span> <span class="nv">keyset</span> <span class="p">}</span>
  <span class="p">(</span><span class="nf">enforce-keyset</span> <span class="nv">keyset</span><span class="p">)</span>
  <span class="nv">keyset</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>


<p>This function doesn’t yet give any access to the data in a row. It’s purpose is for other functions to call on it in the case that they want to do something like place row level restrictions on data. This will be valuable shortly when you write code that needs to call this function.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define a function named <strong>enforce-user-auth</strong> that returns the keyset associated with a given id. </p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.2-enforce-user/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.2-enforce-user/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#enforce-keyset" target="_blank">enforce-keyset</a>, <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=bindings#with-read" target="_blank">with-read</a>, and <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=bindings#bind" target="_blank">bind</a> for more information related to completing this challenge.</p>
</div>
<hr />
<h3 id="43-change-nickname"><strong>4.3 Change Nickname</strong><a class="headerlink" href="#43-change-nickname" title="Permanent link">&para;</a></h3>
<p>Once you can restrict access to data, you’re ready to allow users to take specific actions based on the data they have access to. For example, a user may want to update their profile name, or make changes to sensitive information that other users should not be able to access.</p>
<p>To do that, you can write a function that utilizes the previous function you created. From there, you can add in functionality that allows users to update their data.</p>
<p>Here is an example function <strong>update-data</strong> that allows users to update existing information. It leverages the previous example function <strong>enforce-keyset-of-id</strong> to make an update to a row in the table <strong>example-table</strong>. </p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">update-data</span> <span class="p">(</span><span class="nf">id</span> <span class="nv">new-data</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">enforce-keyset-of-id</span> <span class="nv">id</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">update</span> <span class="nv">example-table</span> <span class="nv">id</span> <span class="p">{</span> <span class="s">&quot;data&quot;</span><span class="err">:</span> <span class="nv">new-data</span> <span class="p">})</span>
  <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;Data updated in row {} to {}&quot;</span> <span class="p">[</span><span class="nv">id</span> <span class="nv">new-data</span><span class="p">]))</span>
</pre></div>


<p>This function combined with the previous function allows users with a specific keyset to make updates to restricted information.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define a function named <strong>change-nickname</strong> that allows users with a specific keyset to update their nickname in the <strong>users</strong> table.</p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.3-change-nickname/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.3-change-nickname/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=update#update" target="_blank">update</a> and <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=update#format" target="_blank">format</a> for more information related to completing this challenge.</p>
</div>
<hr />
<h3 id="44-rotate-keyset"><strong>4.4 Rotate Keyset</strong><a class="headerlink" href="#44-rotate-keyset" title="Permanent link">&para;</a></h3>
<p>Now that users can update their name, you can apply this same functionality to other information. </p>
<p>For example, you can allow users to update their keyset. The ability to update keysets is known as ‘rotating keysets’ and this is where the name ‘Rotatable wallets’ came from for this demonstration. This feature is comparable to being able to update a password, and it’s an extremely useful feature to have in an application.</p>
<p>For this final function, use the information learned from previous steps to add rotating keysets as a feature of your smart contract.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Define a function named rotate-keyset that allows the owner of a keyset to change their keyset.</p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.4-rotate-keyset/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/4-functions/4.4-rotate-keyset/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>View <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=update#update" target="_blank">update</a> and <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=update#format" target="_blank">format</a> for more information related to completing this challenge.</p>
</div>
<hr />
<h2 id="5-create-table"><strong>5. Create Table</strong><a class="headerlink" href="#5-create-table" title="Permanent link">&para;</a></h2>
<p>The last step is to create the <strong>user</strong> table defined within the module.</p>
<div class="admonition warning">
<p class="admonition-title">Code Challenge</p>
<p>Create the user table.</p>
<ul>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/5-create-table/challenge.pact" target="_blank">Challenge</a></li>
<li><a href="https://github.com/kadena-io/pact-lang.org-code/blob/master/rotatable-wallet/2-challenges/5-create-table/solution.pact" target="_blank">Solution</a></li>
</ul>
</div>
<hr />
<h2 id="deploy-the-smart-contract"><strong>Deploy the Smart Contract</strong><a class="headerlink" href="#deploy-the-smart-contract" title="Permanent link">&para;</a></h2>
<p>Your Rotatable Wallet smart contract is complete! If you’d like, you can deploy this contract similar to how you would deploy other smart contracts. </p>
<p>For more information on deploying this smart contract, view the following tutorials.</p>
<ul>
<li><a href="https://pactlang.org/beginner/hello-world-with-pact/" target="_blank">Hello World with Pact</a></li>
<li><a href="https://pactlang.org/beginner/online-editor/" target="_blank">Pact Online Editor</a></li>
<li><a href="https://pactlang.org/beginner/pact-on-atom-sdk/" target="_blank">Pact Development on Atom SDK</a></li>
</ul>
<hr />
<h2 id="review"><strong>Review</strong><a class="headerlink" href="#review" title="Permanent link">&para;</a></h2>
<p>That wraps up this tutorial on the <strong>Rotatable Wallet</strong> application.</p>
<p>Throughout this tutorial, you built a smart contract named <strong>Rotatable Wallets</strong> that demonstrated many important Pact features that you learned throughout previous tutorials.</p>
<p>Most importantly, you showed how modules can be permissioned to ensure the security of running your code on a decentralized network and allow for row level permissions when necessary.</p>
<p>Having the ability to permission modules is an extremely valuable feature of Pact, and you can use this in many other applications in the future. Take some time now to experiment with this feature to try applying it in new situations.</p>
<p>When you’re ready, move to the next tutorial to continue building Pact applications!</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../testing-pact-code-in-the-sdk/" title="Test in the SDK" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Test in the SDK
              </span>
            </div>
          </a>
        
        
          <a href="../project-loans/" title="Project: Loans" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Project: Loans
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2019 Kadena
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/kadena-io" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/kadena_io" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
        <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-127512784-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(a){a.host!=document.location.host&&a.addEventListener("click",function(){var e=a.getAttribute("data-md-action")||"follow";ga("send","event","outbound",e,a.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
  </body>
</html>