



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Pact Developer Tutorials">
      
      
      
        <meta name="author" content="Kadena">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>7. Schemas and Tables - Pact Developer Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica:300,400,400i,700|Helvetica">
        <style>body,input{font-family:"Helvetica","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Helvetica","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#pact-schemas-and-tables" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Pact Developer Tutorials" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Pact Developer Tutorials
              </span>
              <span class="md-header-nav__topic">
                7. Schemas and Tables
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/kadena-io/pact/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kadena-io/pact
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../welcome-to-pact/" title="Beginner" class="md-tabs__link md-tabs__link--active">
          Beginner
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../intermediate/deploy-local-server/" title="Intermediate" class="md-tabs__link">
          Intermediate
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../advanced/coming-soon/" title="Advanced" class="md-tabs__link">
          Advanced
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Pact Developer Tutorials" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Pact Developer Tutorials
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/kadena-io/pact/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kadena-io/pact
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Beginner
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Beginner
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../welcome-to-pact/" title="1. Welcome to Pact" class="md-nav__link">
      1. Welcome to Pact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../online-editor/" title="2. Online Editor" class="md-nav__link">
      2. Online Editor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hello-world-with-pact/" title="3. Hello World" class="md-nav__link">
      3. Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-language-basics/" title="4. Language Basics" class="md-nav__link">
      4. Language Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-modules/" title="5. Modules" class="md-nav__link">
      5. Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-keysets/" title="6. Keysets" class="md-nav__link">
      6. Keysets
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        7. Schemas and Tables
      </label>
    
    <a href="./" title="7. Schemas and Tables" class="md-nav__link md-nav__link--active">
      7. Schemas and Tables
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pact-schemas-and-tables_1" title="Pact Schemas and Tables" class="md-nav__link">
    Pact Schemas and Tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-to-tables-and-schemas" title="Introduction to Tables and Schemas" class="md-nav__link">
    Introduction to Tables and Schemas
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-schemas" title="Define Schemas" class="md-nav__link">
    Define Schemas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tables" title="Define Tables" class="md-nav__link">
    Define Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-tables" title="Create Tables" class="md-nav__link">
    Create Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-built-in-functions" title="Table Built-in Functions" class="md-nav__link">
    Table Built-in Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insert" title="Insert" class="md-nav__link">
    Insert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read" title="Read" class="md-nav__link">
    Read
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" title="Update" class="md-nav__link">
    Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select" title="Select" class="md-nav__link">
    Select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keys" title="Keys" class="md-nav__link">
    Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review" title="Review" class="md-nav__link">
    Review
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-on-atom-sdk/" title="8. Atom SDK" class="md-nav__link">
      8. Atom SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pact-accounts-and-transfers/" title="9. Accounts and Transfers" class="md-nav__link">
      9. Accounts and Transfers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contract-interaction/" title="10. Contract Interaction" class="md-nav__link">
      10. Contract Interaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project-rotatable-wallet/" title="11. Project: Rotatable Wallet" class="md-nav__link">
      11. Project: Rotatable Wallet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project-loans/" title="12. Project: Loans" class="md-nav__link">
      12. Project: Loans
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../testing-pact-code-in-the-sdk/" title="13. Test in the SDK" class="md-nav__link">
      13. Test in the SDK
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Intermediate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Intermediate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intermediate/deploy-local-server/" title="1. Deploy to a Local Server" class="md-nav__link">
      1. Deploy to a Local Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intermediate/pact-and-javascript/" title="2. Pact and Javascript" class="md-nav__link">
      2. Pact and Javascript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intermediate/safety-with-pact/" title="3. Safety with Pact" class="md-nav__link">
      3. Safety with Pact
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/coming-soon/" title="Coming Soon" class="md-nav__link">
      Coming Soon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pact-schemas-and-tables_1" title="Pact Schemas and Tables" class="md-nav__link">
    Pact Schemas and Tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-to-tables-and-schemas" title="Introduction to Tables and Schemas" class="md-nav__link">
    Introduction to Tables and Schemas
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-schemas" title="Define Schemas" class="md-nav__link">
    Define Schemas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-tables" title="Define Tables" class="md-nav__link">
    Define Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-tables" title="Create Tables" class="md-nav__link">
    Create Tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-built-in-functions" title="Table Built-in Functions" class="md-nav__link">
    Table Built-in Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insert" title="Insert" class="md-nav__link">
    Insert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read" title="Read" class="md-nav__link">
    Read
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" title="Update" class="md-nav__link">
    Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select" title="Select" class="md-nav__link">
    Select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keys" title="Keys" class="md-nav__link">
    Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review" title="Review" class="md-nav__link">
    Review
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kadena-io/pact/edit/master/docs/beginner/pact-schemas-and-tables.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="pact-schemas-and-tables">Pact Schemas and Tables<a class="headerlink" href="#pact-schemas-and-tables" title="Permanent link">&para;</a></h1>
<p>Welcome to this introduction to Pact Schemas and Tables!</p>
<p><strong>Topics covered in this tutorial</strong></p>
<ul>
<li>Introduction to Schemas and Tables</li>
<li>Define Schemas</li>
<li>Define Tables</li>
<li>Create Tables</li>
<li>Table built-in functions</li>
</ul>
<p>The goal of this tutorial is to get you familiar with what schemas and tables are, why they’re useful, and to demonstrate how to implement these within a Pact smart contract.</p>
<div class="admonition summary">
<p class="admonition-title">Key Takeaway</p>
<p>Tables are one of the three core elements of Pact smart contracts. Tables are defined using <strong>deftable</strong>, which references a schema defined by <strong>defschema</strong>, and are later created using <strong>create-table</strong>. There are many ways to build functions that store, manipulate, and read data from smart contract tables.</p>
</div>
<hr />
<h2 id="pact-schemas-and-tables_1"><strong>Pact Schemas and Tables</strong><a class="headerlink" href="#pact-schemas-and-tables_1" title="Permanent link">&para;</a></h2>
<iframe width="720" height="405" src="https://www.youtube.com/embed/MwzsAvEyaQk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Subscribe to our <a href="https://www.youtube.com/channel/UCB6-MaxD2hlcGLL70ukHotA" target="_blank">YouTube channel </a> to access the latest Pact tutorials.</p>
<hr />
<h2 id="introduction-to-tables-and-schemas"><strong>Introduction to Tables and Schemas</strong><a class="headerlink" href="#introduction-to-tables-and-schemas" title="Permanent link">&para;</a></h2>
<p>Tables in Pact are responsible for holding all of the data for application. Data is stored in a key-row structure similar to other relational databases. Tables are defined by schemas that define both the field values and field types. </p>
<p>Before completing this tutorial, it may be helpful to read through some of the existing materials on schemas, types, and tables. This material includes some of the prerequisites needed to understand the conceptual foundations behind what tables are and how they provide value to your Pact smart contracts.</p>
<p><strong>Pact Language Reference</strong></p>
<ul>
<li><a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html#table-creation" target="_blank">Table Creation</a></li>
<li><a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html#types-and-schemas" target="_blank">Types and Schemas</a></li>
</ul>
<hr />
<h3 id="define-schemas"><strong>Define Schemas</strong><a class="headerlink" href="#define-schemas" title="Permanent link">&para;</a></h3>
<p>Before creating a table in Pact, you need to define its schema, which describes the structure of the table. Schemas specify the columns and data types that are meant to be in a table. Schemas are defined within Pact modules using <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=tables%20and%20schemas#defschema" target="_blank">defschema</a> and consist of a series of <strong>field names</strong> and <strong>field types</strong>.</p>
<p>Each field name specifies a column in the table, and each field type specifies the type of data held in that table. </p>
<p>The example table below contains field names and field types. In this example, there are 3 fields; <strong>balance</strong>, <strong>amount</strong>, and <strong>ccy</strong> (currency), each with their own field type.</p>
<p><strong>Accounts Table</strong></p>
<table>
<thead>
<tr>
<th>field name</th>
<th>field type</th>
</tr>
</thead>
<tbody>
<tr>
<td>balance</td>
<td>decimal</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
</tr>
<tr>
<td>ccy</td>
<td>string</td>
</tr>
</tbody>
</table>
<p>You can create this schema in Pact using <strong>defschema</strong> as shown below.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defschema</span> <span class="nv">accounts</span>
  <span class="s">&quot;Schema for accounts table.&quot;</span>
  <span class="nv">balance</span><span class="ss">:decimal</span>
  <span class="nv">amount</span><span class="ss">:decimal</span>
  <span class="nv">ccy</span><span class="ss">:string</span>
  <span class="p">)</span>
</pre></div>


<p>All table schemas you create will look similar to this but will contain different field names and types. Field names can include whatever works best for your application, and fields types can include any of the types supported by Pact. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data types supported by Pact can be found <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=types#data-types" target="_blank">here</a>.</p>
</div>
<hr />
<h3 id="define-tables"><strong>Define Tables</strong><a class="headerlink" href="#define-tables" title="Permanent link">&para;</a></h3>
<p>Tables hold data created by the smart contract. </p>
<p>These are defined within Pact modules and there is no limit to the number of tables you can define. This data can be added, read, or changed using functions, and access to this data can be restricted using what is known as <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=table%20guards#module-table-guards" target="_blank">table guards</a>.</p>
<p>Tables are defined after the prerequisite schema is defined, using <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=deftable#deftable" target="_blank">deftable</a> followed by the table name and a reference to the table’s schema.</p>
<p><strong>Accounts Example</strong></p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">deftable</span> <span class="nv">table-name</span><span class="err">:</span><span class="p">{</span><span class="nv">schema-name</span><span class="p">})</span>
</pre></div>


<p>Given the schema from the earlier defined schema, you can define the table as shown below.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">deftable</span> <span class="nv">accounts-table</span><span class="err">:</span><span class="p">{</span><span class="nv">accounts</span><span class="p">})</span>
</pre></div>


<div class="admonition summary">
<p class="admonition-title">Notes on Syntax</p>
<ul>
<li>Notice that the table and schema are represented as a pair, separated by a “:”. </li>
<li>The { } around the schema-name are there because the schema is an object. </li>
</ul>
</div>
<p>The schema name and table names must be different from one another. It’s best practice to make names that resemble each other but are not identical. </p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">deftable</span> <span class="nv">cat-table</span><span class="err">:</span><span class="p">{</span><span class="nv">cat</span><span class="p">})</span>  
<span class="p">(</span><span class="nf">deftable</span> <span class="nv">asset-tracker</span><span class="err">:</span><span class="p">{</span><span class="nv">asset</span><span class="p">})</span>
</pre></div>


<p>Keeping names similar helps you track your schemas and tables more effectively while avoiding confusion between their names.</p>
<hr />
<h3 id="create-tables"><strong>Create Tables</strong><a class="headerlink" href="#create-tables" title="Permanent link">&para;</a></h3>
<p>Once tables are defined, they still need to be created. </p>
<p>Though tables are defined within the module, creating tables in Pact is done outside of the module. This is done to ensure that the module may be redefined or updated later without having to re-create the table.</p>
<p>The relationship of modules to tables is important, as described in <a href="https://pact-language.readthedocs.io/en/latest/pact-reference.html?highlight=table%20creation#module-table-guards" target="_blank">table guards</a></p>
<p>Tables are created outside of the module using <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=create-table#create-table" target="_blank">create-table</a> followed by the table name as defined within the module.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">deftable</span> <span class="nv">cat-table</span><span class="err">:</span><span class="p">{</span><span class="nv">cat</span><span class="p">})</span>  
<span class="p">(</span><span class="nf">deftable</span> <span class="nv">asset-tracker</span><span class="err">:</span><span class="p">{</span><span class="nv">asset</span><span class="p">})</span>
</pre></div>


<p>This syntax for creating tables is simple. The main concern here is to make sure that you follow through with creating each of the tables that are defined within the module.</p>
<hr />
<h3 id="table-built-in-functions"><strong>Table Built-in Functions</strong><a class="headerlink" href="#table-built-in-functions" title="Permanent link">&para;</a></h3>
<p>When working with tables, there are many built-in functions available for you to work with table data. </p>
<table>
<thead>
<tr>
<th>function type</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#insert" target="_blank">Insert</a></td>
<td>Insert new rows into a table.</td>
</tr>
<tr>
<td><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#read" target="_blank">Read</a></td>
<td>Read values from a table.</td>
</tr>
<tr>
<td><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#update" target="_blank">Update</a></td>
<td>Update values within a table.</td>
</tr>
<tr>
<td>Delete</td>
<td>Not possible in Pact.</td>
</tr>
</tbody>
</table>
<p>Notice that these functions are similar to common options available in other databases (CRUD - create, read, update, delete).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Delete is not available because, as you may know, you cannot delete data from a blockchain. Also, rather than create, the Pact built-in function is named insert.</p>
</div>
<hr />
<h3 id="insert"><strong>Insert</strong><a class="headerlink" href="#insert" title="Permanent link">&para;</a></h3>
<p><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#insert" target="_blank">Insert</a> functions are used to add new data into a table. These are useful when creating new artifacts such as entities, loans, accounts, and in any other case where you may want to add data. </p>
<p>For an example of an <strong>insert</strong> function, pretend you have the following empty table.</p>
<p><strong>entity-table</strong></p>
<table>
<thead>
<tr>
<th>key</th>
<th>entityName</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>To add a row to this table with an <strong>entityName</strong> of “My Entity” at the key of <strong>entity-1</strong>, you would write the following Pact code.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">insert</span> <span class="nv">entity-table</span> <span class="err">“</span><span class="nv">entity-1</span><span class="err">”</span> <span class="p">{</span> <span class="s">&quot;entityName&quot;</span><span class="err">:</span> <span class="s">&quot;My Entity&quot;</span><span class="p">})</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is required that the key be entered as a string.</p>
</div>
<p>You can also place <strong>insert</strong> within a function and using the inputs to add new data to rows within a table. This will help you add rows more dynamically from within your application. </p>
<p>Here is an example using insert from within a function.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">create-entity</span> <span class="p">(</span><span class="nf">entityName</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">insert</span> <span class="nv">entity-table</span> <span class="nv">entityId</span> <span class="p">{</span>
      <span class="s">&quot;entityName&quot;</span><span class="err">:</span> <span class="nv">entityName</span>
      <span class="p">}</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>


<p>In each of the previous cases, the final result would insert the data similar to the following into the <strong>entity-table</strong>.</p>
<table>
<thead>
<tr>
<th>key</th>
<th>entityName</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity-1</td>
<td>My Entity</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="read"><strong>Read</strong><a class="headerlink" href="#read" title="Permanent link">&para;</a></h3>
<p><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#read" target="_blank">Read</a> allows you to read rows from a table for a given key. </p>
<p>For this example, imagine you had the following table and you wanted to read the balance and currency at the key of <strong>entity-1</strong>.</p>
<p><strong>Accounts Table</strong></p>
<table>
<thead>
<tr>
<th>key</th>
<th>balance</th>
<th>ccy</th>
</tr>
</thead>
<tbody>
<tr>
<td>account-1</td>
<td>4.00</td>
<td>USD</td>
</tr>
<tr>
<td>account-2</td>
<td>3.00</td>
<td>USD</td>
</tr>
</tbody>
</table>
<p>Using read, you can specify the id and you’ll get back the information you request.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">read </span><span class="nv">accounts</span> <span class="nv">account-1</span> <span class="p">[</span><span class="ss">&#39;balance</span> <span class="ss">&#39;ccy</span><span class="p">])</span>
</pre></div>


<p>Here is an example of how to get similar functionality by using read from within a function. </p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">read-accounts</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">read </span><span class="nv">accounts</span> <span class="nv">id</span> <span class="p">[</span><span class="err">‘</span><span class="nv">balance</span> <span class="err">‘</span><span class="nv">ccy</span><span class="p">])</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>


<p>In each of the cases shown above, the functions would return the following values.</p>
<table>
<thead>
<tr>
<th>balance</th>
<th>ccy</th>
</tr>
</thead>
<tbody>
<tr>
<td>4.00</td>
<td>USD</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="update"><strong>Update</strong><a class="headerlink" href="#update" title="Permanent link">&para;</a></h3>
<p><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html#update" target="_blank">Update</a> functions can be used to update a values in an existing row of a table. Updating is helpful in situations where you need to change the status of a column or amend the initial dataset to a new value.</p>
<p>Using <strong>update</strong>, you can specify the row id to update a value within that row. This value would generally be passed in by the user as a function parameter.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">update</span> <span class="nv">table-name</span> <span class="nv">id</span> <span class="p">{</span><span class="s">&quot;value&quot;</span><span class="err">:</span> <span class="nv">new-value</span><span class="p">}</span>
</pre></div>


<p>For example, pretend you had the following table and wanted to update the <strong>assetPrice</strong>.</p>
<p><strong>Assets Table</strong></p>
<table>
<thead>
<tr>
<th>key</th>
<th>assetName</th>
<th>assetPrice</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity-1</td>
<td>My Asset</td>
<td>5.0</td>
<td>todo</td>
</tr>
</tbody>
</table>
<p>The <strong>amend-assetPrice</strong> function below updates the <strong>assetId</strong> column of an <strong>assets-table</strong>. It then <strong>reads</strong> the value of the updated column.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">amend-assetPrice</span> <span class="p">(</span><span class="nf">assetPrice</span><span class="ss">:decimal</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">update</span> <span class="nv">assets-table</span> <span class="nv">assetPrice</span> <span class="p">{</span>
        <span class="s">&quot;assetPrice&quot;</span><span class="ss">:assetPrice</span>
    <span class="p">}</span>
  <span class="p">)</span>
  <span class="p">(</span><span class="nb">read </span><span class="nv">asset-table</span> <span class="nv">assetId</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>


<p>This same pattern can be used in many different ways. </p>
<p>For example, you may be creating an asset and want to track its progress throughout the creation process with fields like todo, in progress, or done. In this case, you could use the function below <strong>asset-update</strong>, to change the status of the asset as it progresses through the process.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">asset-update</span> <span class="p">(</span><span class="nf">assetId</span><span class="ss">:string</span> <span class="nv">new-status</span><span class="ss">:string</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">update</span> <span class="nv">assets-table</span> <span class="nv">assetId</span> <span class="p">{</span>
    <span class="s">&quot;status&quot;</span><span class="err">:</span> <span class="nv">new-status</span>
  <span class="p">})</span>
  <span class="p">(</span><span class="nb">read </span><span class="nv">asset-table</span> <span class="nv">assetId</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>


<hr />
<h3 id="select"><strong>Select</strong><a class="headerlink" href="#select" title="Permanent link">&para;</a></h3>
<p><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=constantly%20true#select" target="_blank">Select</a> is used to read values from a table. </p>
<p>This is similar to <strong>read</strong> but select includes more specificity allowing you greater flexibility in what information you choose to select. The syntax for selecting from tables closely resembles SQL statements. </p>
<p>The simplest select statement you can create would be to select all values of an existing table. </p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">select </span><span class="nv">table-name</span><span class="p">)</span>
</pre></div>


<p>Similar to other built-in functions, you can run this from within another function.</p>
<p>For example, here is the <strong>assets-table</strong> from earlier.</p>
<p><strong>Assets Table</strong></p>
<table>
<thead>
<tr>
<th>key</th>
<th>assetName</th>
<th>assetPrice</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity-1</td>
<td>My Asset</td>
<td>5.0</td>
<td>todo</td>
</tr>
<tr>
<td>entity-2</td>
<td>Asset 2</td>
<td>6.0</td>
<td>in progress</td>
</tr>
<tr>
<td>entity-3</td>
<td>Asset 3</td>
<td>7.0</td>
<td>done</td>
</tr>
</tbody>
</table>
<p>You can run the following <strong>select</strong> statement to return all values from this table.</p>
<div class="codehilite"><pre><span></span>  <span class="p">(</span><span class="nf">defun</span> <span class="nv">select-assets</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">select </span><span class="nv">assets-table</span> <span class="p">(</span><span class="nb">constantly </span><span class="nv">true</span><span class="p">))</span>
  <span class="p">)</span>
</pre></div>


<p>This query will return the following values from the <strong>assets-table</strong>.</p>
<table>
<thead>
<tr>
<th>key</th>
<th>assetName</th>
<th>assetPrice</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity-1</td>
<td>My Asset</td>
<td>5.0</td>
<td>todo</td>
</tr>
<tr>
<td>entity-2</td>
<td>Asset 2</td>
<td>6.0</td>
<td>in progress</td>
</tr>
<tr>
<td>entity-3</td>
<td>Asset 3</td>
<td>7.0</td>
<td>done</td>
</tr>
</tbody>
</table>
<p>Along with select, you can also use a <a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=constantly%20true#where" target="_blank">where</a> statement to further refine your query as shown below.</p>
<div class="codehilite"><pre><span></span>  <span class="p">(</span><span class="nb">select </span><span class="nv">assets-table</span> <span class="p">[</span><span class="ss">&#39;assetName</span>,<span class="ss">&#39;assetPrice</span><span class="p">]</span> <span class="p">(</span><span class="nf">where</span> <span class="ss">&#39;assetName</span> <span class="p">(</span><span class="nb">= </span><span class="s">&quot;Asset 2&quot;</span><span class="p">)))</span>
</pre></div>


<p>This query would return the following values from the <strong>assets-table</strong>.</p>
<table>
<thead>
<tr>
<th>assetName</th>
<th>assetPrice</th>
</tr>
</thead>
<tbody>
<tr>
<td>Asset 2</td>
<td>6.0</td>
</tr>
</tbody>
</table>
<p>You can also specify operators such as greater than or less than from within the WHERE clause as shown below.</p>
<div class="codehilite"><pre><span></span>  <span class="p">(</span><span class="nb">select </span><span class="nv">assets-table</span> <span class="p">(</span><span class="nf">where</span> <span class="ss">&#39;assetPrice</span> <span class="p">(</span><span class="nb">&gt; </span><span class="mf">6.0</span><span class="p">)))</span>
</pre></div>


<p>This query would return the following values from the <strong>assets-table</strong>.</p>
<table>
<thead>
<tr>
<th>key</th>
<th>assetName</th>
<th>assetPrice</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity-3</td>
<td>Asset 3</td>
<td>7.0</td>
<td>done</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="keys"><strong>Keys</strong><a class="headerlink" href="#keys" title="Permanent link">&para;</a></h3>
<p><a href="https://pact-language.readthedocs.io/en/latest/pact-functions.html?highlight=constantly%20true#keys" target="_blank">Keys</a> allows you to return all the <strong>key</strong> values in a table.</p>
<p>Given the previously shown <strong>assets-table</strong>, you could return each of the keys using the code below.</p>
<div class="codehilite"><pre><span></span>  <span class="p">(</span><span class="nb">keys </span><span class="nv">assets-table</span><span class="p">)</span>
</pre></div>


<p>This can also be done within a function as shown below.</p>
<div class="codehilite"><pre><span></span>    <span class="p">(</span><span class="nf">defun</span> <span class="nv">get-keys</span> <span class="p">(</span><span class="nf">table-name</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">keys </span><span class="nv">table-name</span><span class="p">)</span>
  <span class="p">)</span>
</pre></div>


<hr />
<h3 id="review"><strong>Review</strong><a class="headerlink" href="#review" title="Permanent link">&para;</a></h3>
<p>That wraps up this tutorial on schemas and tables with Pact.</p>
<p>By completing this tutorial, you’ve mastered many of the core ideas surrounding schemas and tables. You’ve also seen some of the basic functions that are useful for manipulating data from within a table.</p>
<p>You can try building out your own database from scratch or by using existing database examples to work from. An excellent resource for finding existing schemas for well designed databases can be found <a href="http://www.databaseanswers.org/data_models/" target="_blank">here</a>. If you’re unfamiliar with database design, you can review most of what you need to know <a href="https://www.tutorialspoint.com/dbms/dbms_data_schemas.htm" target="_blank">here</a>. That website goes into a lots of detail, so if you’d like to focus more on specifically what might be useful to you right now, you can find that  <a href="https://www.lucidchart.com/pages/database-diagram/database-design" target="_blank">here</a>.</p>
<p>Try finding a database you’re interested in to practice recreating some of its functionality. And if you’re not quite ready to try that, you can check out the next tutorial instead. You’ll see many more examples of tables, schemas, and their related functions throughout the rest of this series.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../pact-keysets/" title="6. Keysets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                6. Keysets
              </span>
            </div>
          </a>
        
        
          <a href="../pact-on-atom-sdk/" title="8. Atom SDK" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                8. Atom SDK
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2019 Kadena
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/kadena-io" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/kadena_io" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
        <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-127512784-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(a){a.host!=document.location.host&&a.addEventListener("click",function(){var e=a.getAttribute("data-md-action")||"follow";ga("send","event","outbound",e,a.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
  </body>
</html>